---
layout: article
title: "c++核心编程"
---

## 1 内存分区模型

## 2 引用

## 3 函数提高

## 4 类和对象

## 5 文件操作

程序运行时产生的数据都属于临时数据，程序一旦运行结束都会被释放

通过文件操作可以将**数据持久化**

c++中对文件操作需要包含头文件==<fstream>==



文件类型有两种

1. **文本文件**：文件以文本的**ASCII码**形式存储在计算机中
2. **二进制文件**：文件以文本的二进制形式存储在计算机中



操作文件的三大类：

1. ofstream：写文件
2. ifstream：读数据
3. fstream：读写文件

（`f:file`;stream:流）

### 文本文件

#### 写文件

写文件步骤：

1. 包含头文件

`#include<fstream>`

2. 创建流对象

`ofstream ofs;`

3. 打开文件

`ofs.open("文件路径","打开方式");`(打开方式见下表)

4. 写数据

`ofs<<"写入的数据";`

5. 关闭文件

`ofs.close();`



文件的打开方式

| ==打开方式==  | 解释                         |
| ------------- | ---------------------------- |
| `ios::in`     | 为读文件而打开文件           |
| `ios::out`    | 为写文件而打开文件           |
| `ios::ste`    | 初始位置：文件尾             |
| `ios::app`    | 追加方式写文件               |
| `ios::trunc`  | 如果文件存在，先删除，再创建 |
| `ios::binary` | 二进制方式                   |

注意：文件打开方式可以配合使用，利用`|`操作符

例如：用二进制写文件`ios::binary | ios::out`

示例：

```c++
#include<iostream>
using namespace std;
#include<fstream>
//文本文件 写文件
int main()
{
	//1. 包含头文件#include<fstream>
	//2. 创建流对象
	ofstream ofs;
	//3. 指定打开方式
	ofs.open("text.txt",ios::out);//现在写的只是文件名,创建在项目同级目录下
	//4. 写内容
	ofs<<"姓名：张三"<<endl;
	ofs<<"性别：男"<<endl;
	ofs<<"年龄：22"<<endl;
	//5. 关闭文件
	ofs.close();

	system("pause");
	return 0;
}
```

总结：

- 文件操作必须包含fstream
- 写文件可以利用ofstream，或者fstream类
- 打开文件需要指定操作文件路径，以及打开方式
- 利用<<可以向文件写数据
- 操作完毕，需要关闭文件



#### 读文件

读文件与写文件步骤类似



读文件步骤如下：

1. 包含头文件

`#include<fstream>`

2. 创建流对象

`ifstream ifs;`

3. 打开文件并判断文件是否打开成功

`ifs.open("文件路径","打开方式");`

4. 读数据

四种方式读取

5. 关闭文件



示例：

```c++
#include<iostream>
using namespace std;
#include<fstream>
#include<string>
//文本文件 读文件
void text01()
{
	//1. 包含头文件#include<fstream>
	//2. 创建流对象
	ifstream ifs;
	//3. 打开文件并判断是否打开成功
	ifs.open("text.txt",ios::in);

	if(!ifs.is_open())
	{
		cout<<"文件打开失败"<<endl;
		return;
	}
	//4. 读数据
	//4.1 第一种
	char buf[1024]={0};
	while(ifs>>buf)
	{
		cout<<buf<<endl;
	}
	//4.2 第二种
	char buf[1024]={0};
	while(ifs.getline(buf,sizeof(buf)))
	{
		cout<<buf<<endl;
	}
	//4.3 第三种
	string buf;
	while(getline(ifs,buf))
	{
		cout<<buf<<endl;
	}
	//4.4 第四种//不建议使用
	char c;
	while((c=ifs.get())!=EOF)
	{
		cout<<c;
	}

	//5. 关闭文件
	ifs.close();
}

int main()
{
	text01();

	system("pause");
	return 0;
}
```

总结：

- 读文件可以利用ifstream，或者fstream
- 利用is_open函数判断文件是否打开成功
- close关闭文件



### 二进制文件

以二进制方式对文件进行读写操作

打开方式为`ios::binary`

